![[slp2ndbik88d8lwyiwvczncsahi.png]]
- _Scheduler_ планирует pod,
- _Kubelet_ запускает pod.
-
Pod представляет собой запрос на запуск одного или более контейнеров на одном узле
```
apiVersion: v1 
kind: Namespace 
metadata: 
	name: web-app-dev
```
kubectl apply -f web-app-ns.yaml
```
apiVersion: v1 
kind: Pod 
metadata: 
	name: simple-web 
	namespace: web-app-dev 
spec: 
	containers: 
		- name: web 
		  image: ksxack/lesson1:v0.2 ## укажите здесь свой образ из предыдущих уроков в формате ##
		  image: <имя_пользователя>/<репозиторий>/<тег> 
		  imagePullPolicy: Always 
		  ports: 
			- name: web 
			  containerPort: 8080 
			  protocol: TCP

```

kubectl -n web-app-dev port-forward pod/simple-web 8080:8080
прокинуть порты


kind ## вид ресурса, мы уже знаем 2 вида ресурсов k8s: Namespace, Pod metadata.name ## имя Пода, в данном случае это simple-web. 
metadata.labels ## ярлыки (или метки) для пода, в этом случае ярлык app=goweb можно использовать для поиска или группировки подов. spec.containers.name
имя контейнера внутри пода. В поде может быть несколько контейнеров, здесь контейнер называется web. spec.containers.image ## образ контейнера, который будет использоваться. Замените значение на свой образ, созданный в предыдущих уроках. spec.containers.ports ## указывает порт 8080, который будет открыт для доступа извне.

- _Pending_ (ожидание): API Server создал ресурс пода и сохранил его в etcd, но под ещё не был запланирован, а образы его контейнеров — не получены из реестра;
- _Running_ (функционирует): под был назначен узлу и все контейнеры созданы _kubelet_'ом;
- _Succeeded_ (успешно завершён): функционирование всех контейнеров пода успешно завершено и они не будут перезапускаться;
- _Failed_ (завершено с ошибкой): функционирование всех контейнеров пода прекращено и как минимум один из контейнеров завершился со сбоем;
- _Unknown_ (неизвестно): API Server не смог опросить статус пода, обычно из-за ошибки во взаимодействии с _kubelet_.

`kubectl get pod`

`kubectl describe pod/$PODNAME`



- Используйте init-контейнеры для подготовки пода к нормальному функционированию. Например, для получения внешних данных, создания таблиц в базе данных или ожидания доступности сервиса, от которого под зависит. При необходимости можно создавать множество init-контейнеров, и все они должны успешно завершиться до того, как будут запущены обычные контейнеры.
- Всегда добавляйте `livenessProbe` и `readinessProbe`. Первая используется _kubelet_'ом, чтобы понять, нужно ли и когда нужно перезапускать контейнер, и _deployment_'ом, чтобы решить, был ли успешным rolling update. Вторая — используется _service_'ом для принятия решения о направлении трафика на под. Если эти пробы не определены, _kubelet_ для обоих предполагает, что они успешно выполнились. Это приводит к двум последствиям: а) [политика рестарта](https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#restart-policy) не может быть применена, б) контейнеры в поде мгновенно получают трафик от стоящего перед ними _service_'а, даже если они всё ещё заняты процессом запуска.
- Используйте хуки для правильной инициализации контейнера и полного его уничтожения. Например, это полезно в случае функционирования приложения, к исходному коду которого у вас нет доступа или нет возможности его модификации, но которое требует некой инициализации или подготовки к завершению работы — например, очистки подключений к базе данных. Заметьте, что при использовании _service_'а завершение работы API Server, контроллера endpoint'ов и kube-proxy может занять некоторое время (например, удаление соответствующих записей из iptables). Таким образом, завершающий свою работу под может повлиять на запросы к приложению. Зачастую для решения этой проблемы достаточно простейшего хука с вызовом sleep.
- Для нужд отладки и для понимания в целом, почему под прекратил работу, приложение может писать в `/dev/termination-log`, а вы — просматривать сообщения с помощью `kubectl describe pod …`. Эти настройки по умолчанию меняются через `terminationMessagePath` и/или с помощью `terminationMessagePolicy` в спецификации пода — подробнее см. в [API reference](https://kubernetes.io/docs/api-reference/v1.8/#container-v1-core).